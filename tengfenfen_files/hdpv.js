/* sohutv 2017-03-23 16:24:54 */
window.sohuHD||(window.sohuHD={}),sohuHD.cookie||(sohuHD.cookie=function(e,t,i){if("undefined"==typeof t){var n=new RegExp("(?:^|; )"+e+"=([^;]*)").exec(document.cookie);return n?n[1]||"":""}i=i||{},null===t&&(t="",i.expires=-1);var r="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var o;"number"==typeof i.expires?(o=new Date,o.setTime(o.getTime()+24*i.expires*60*60*1e3)):o=i.expires,r="; expires="+o.toUTCString()}var a=i.path?"; path="+i.path:"",c=i.domain?"; domain="+i.domain:"",s=i.secure?"; secure":"";document.cookie=[e,"=",t,r,a,c,s].join("")}),sohuHD.getScript||(sohuHD.getScript=function(e,t,i,n,r){var o=document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script");a.src=e,a.charset=i||sohuHD.docCharset,r=r||[];var c=!1;a.onload=a.onreadystatechange=function(){c||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(c=!0,t&&t.apply(this,r),a.onload=a.onreadystatechange=null,n&&(a.onerror=n),o&&a.parentNode&&o.removeChild(a))},o.insertBefore(a,o.firstChild)}),sohuHD.getJSONP||(sohuHD.getJSONP=function(e,t,i,n){var r="jsonp"+(new Date).getTime();e.indexOf("callback=?")>-1&&(e=e.replace("callback=?","callback="+r),window[r]=function(e){t(e);try{delete window[r]}catch(i){}},sohuHD.getScript(e+"&_="+(new Date).getTime(),null,i,n))}),function(e,t){if("undefined"==typeof e._hdpv){var i={},n="//pv.hd.sohu.com/pvpb.gif",r=1,o={getCookie:function(e){var i,n,r=null,o=e+"=";return t.cookie.length>0&&(i=t.cookie.indexOf(o),-1!=i&&(i+=o.length,n=t.cookie.indexOf(";",i),-1==n&&(n=t.cookie.length),r=unescape(t.cookie.substring(i,n)))),r},setCookie:function(e,i,n){if("undefined"!=typeof i){n=n||{},null===i&&(i="",n.expires=-1);var r="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var o;"number"==typeof n.expires?(o=new Date,o.setTime(o.getTime()+24*n.expires*60*60*1e3)):o=n.expires,r="; expires="+o.toUTCString()}var a=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",s=n.secure?"; secure":"";t.cookie=[e,"=",i,r,a,c,s].join("")}},getQueryStrByName:function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]+)","i"));return null==t||t.length<1?"":t[1]},pingback:function(e){var t=new Image,n="hdpv_"+r++;i[n]=t,t.onload=t.onerror=t.onabort=function(){i[n]=null},t.src=e},sendClickLog:function(e,t){e=e||"";var i=location.href,n=t&&t.getAttribute?t.getAttribute("href"):"",r=encodeURIComponent;this.pingback("//click.hd.sohu.com.cn/s.gif?type="+e+"&ref="+r(i)+"&des="+r(n))},utf8to16:function(e){var t,i,n,r,o,a,c,s,u;for(t=[],r=e.length,i=n=0;r>i;){switch(o=e.charCodeAt(i++),o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t[n++]=e.charAt(i-1);break;case 12:case 13:a=e.charCodeAt(i++),t[n++]=String.fromCharCode((31&o)<<6|63&a);break;case 14:a=e.charCodeAt(i++),c=e.charCodeAt(i++),t[n++]=String.fromCharCode((15&o)<<12|(63&a)<<6|63&c);break;case 15:switch(15&o){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a=e.charCodeAt(i++),c=e.charCodeAt(i++),s=e.charCodeAt(i++),u=(7&o)<<18|(63&a)<<12|(63&c)<<6|(63&s)-65536,u>=0&&1048575>=u?t[n]=String.fromCharCode(u>>>10&1023|55296,1023&u|56320):t[n]="?";break;case 8:case 9:case 10:case 11:i+=4,t[n]="?";break;case 12:case 13:i+=5,t[n]="?"}}n++}return t.join("")},b64_decodex:function(e){var t,i=new Array,n="";for(t=0;t<e.length;t+=4)n+=o.b64_423(e.substr(t,4));for(t=0;t<n.length;t+=8)i+=o.b2i(n.substr(t,8));return i},b64_423:function(e){for(var t=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"),i=new String,n=0;n<e.length;n++){for(var r=0;64>r;r++)if(e.charAt(n)==t[r]){var o=r.toString(2);i+=("000000"+o).substr(o.length);break}if(64==r)return 2==n?i.substr(0,8):i.substr(0,16)}return i},b2i:function(e){for(var t=0,i=128,n=0;8>n;n++,i/=2)"1"==e.charAt(n)&&(t+=i);return String.fromCharCode(t)}};o.passport=function(){var e,i={},n=function(){var e,i,n,r=["ppinf","ppinfo","passport"];for(e=0,i=r.length;i>e;e++)if(n=new RegExp("\\b"+r[e]+"\\b=(.*?)(?:$|;)").exec(t.cookie),n&&n.length){n=n[1];break}return n},r=function(e){var t,i=o.utf8to16,n=o.b64_decodex;try{return e=unescape(e).split("|"),"1"!=e[0]&&"2"!=e[0]||(t=i(n(e[3]))),t}catch(r){}},a=function(e){e=e||"";var t,i,n,r={};try{for(e=e.split("|"),t=0,i=e.length;i>t;t++)n=e[t].split(":"),n.length>1&&(r[n[0]]=n[2])}catch(o){}return r},c=function(){var t=n(),o=i;return e!=t&&(e=t,o=a(r(t)),i=o),o};return{getAppid:function(){return c().appid||""},getPassport:function(){return c().userid||""},getUid:function(){return c().uid||""},getUUID:function(){return c().uuid||""},getQname:function(){return c().uniqname||""}}}();var a={ie:!-[1],swfurl:"//tv.sohu.com/upload/swf/playerGetUID.swf",timer:null,container:null,pageLB:o.getCookie("series_video"),guid:function(){return["TT",(+new Date+r++).toString(36),(1e18*Math.random()).toString(36)].join("").slice(0,16).toUpperCase()},getLandrefer:function(){var e=function(){var e=t.referrer;return e?(e=e.split("?")[0],e=e.split("#")[0],-1==e.indexOf("tv.sohu.com")):!1},i=o.getCookie("landingrefer");return i||(e()?(o.setCookie("landingrefer",encodeURIComponent(t.referrer),{path:"/",domain:"tv.sohu.com"}),i=t.referrer):i=""),i},createSWF:function(){this.container||(this.container=t.createElement("div"),t.body.firstChild?t.body.insertBefore(this.container,t.body.firstChild):t.body.appendChild(this.container),this.container.setAttribute("style","display:block;clear:both;float:none;position:absolute;right:0;bottom:0;border:none;"));var e=this.guid();this.container.innerHTML='<object id="'+e+(this.ie?'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ':"")+'" data="'+this.swfurl+'" type="application/x-shockwave-flash"  width="1" height="1" style="position:absolute;right:0;bottom:0;border:none;" ><param name="movie" value="'+this.swfurl+'" /><param name="wmode" value="transparent" /><param name="version" value="10" /><param name="allowScriptAccess" value="always" /><param name="flashvars" /></object>',this.swf=t.getElementById(e)},run:function(){if(clearTimeout(this.timer),this.itmer=null,"undefined"==typeof this.flashVersion){this.flashVersion="";try{var i=e.navigator.plugins["Shockwave Flash"]||e.ActiveXObject;this.flashVersion=i.description||function(){return new i("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}()}catch(n){}this.flashVersion=(this.flashVersion.match(/\d+/g)||[0])[0]}var r=this;this.executed=!1,this.flashVersion<9?c(null,e.undefined):this.intervalID=setInterval(function(){t.body&&(clearInterval(r.intervalID),r.createSWF(),r.timer=setTimeout(function(){c(null,e.undefined,"timeout=1")},1e4))},100)}},c=function(i,r,c){if(a.timer&&(clearTimeout(a.timer),a.timer=null),!a.executed){a.executed=!0;var s=function(){var e=0;return e=a.lb?a.lb:a.pageLB?a.pageLB:0,a.lb=null,delete a.lb,e}(),u="undefined"==typeof _tv_hdpv_options?{}:_tv_hdpv_options,h="undefined"!=typeof top&&top.location==self.location?"t":"f",d=t.cookie.indexOf("ppinf=")<0&&t.cookie.indexOf("ppinfo=")<0&&t.cookie.indexOf("passport=")<0?"f":"t",f=o.passport.getPassport(),p=a.swf,l=function(){var e="",t=o.getCookie("SUV"),i="";try{i=p?p.getData("SUV"):""}catch(n){}if(i)o.setCookie("SUV",i,{path:"/",domain:".sohu.com",expires:100}),e=i;else if(t){try{p&&p.setData("SUV",t)}catch(r){}e=t}return e}();i=function(){var e="",t=o.getCookie("fuid"),i="";try{i=p?p.getData("id"):""}catch(n){}if(t){try{p&&p.setData("id",t)}catch(r){}e=t}else i&&(o.setCookie("fuid",i,{path:"/",domain:"tv.sohu.com",expires:100}),e=i);return e}(),i||(i=null!==l?l:"");var g=o.getCookie("YYID"),m=o.getCookie("showqd"),v=[n,"?","url=",encodeURIComponent(e.location.href),"&refer=",encodeURIComponent(t.referrer),"&fuid=",i,"&yyid=",g?g:"","&showqd=",m?m:""].join(""),b="";try{"f"==h&&(b=e.top.location.href)}catch(y){}try{v+=["&vid=","undefined"!=typeof vid&&""!==vid?escape(vid):"","&nid=","undefined"!=typeof nid&&""!==nid?nid:"","&pid=","undefined"!=typeof pid&&""!==pid?pid:"","&suv=",null!==l?l:"",u.is404?"&is404=t":"","&istoploc=",h,"&topurl=",b,"&lb=",s,"&oth=",o.getCookie("_LQD"),"&cd=",o.getCookie("_LCODE"),"&lf=",encodeURIComponent(a.getLandrefer()),"&passport=",f,"&_=",(new Date).getTime(),"&islogin=",d,"&catename=","undefined"!=typeof filmType&&""!==filmType?filmType:"","undefined"!=typeof cateId?"&cateid="+cateId:"","&playlistid=",e.vrs_playlist_id||e._playListId||e.playlistId||e.PLAYLIST_ID||"","undefined"!=typeof _uid?"&buid="+_uid:"",r?"&"+r:"",c?"&"+c:""].join("")}catch(w){}o.pingback(v)}};o.setCookie("series_video",null,{path:"/"});var s=t.referrer,u="//click.hd.sohu.com.cn/s.gif?";-1!=s.search("so.tv.sohu.com/mts?")&&(o.pingback(u+"type=search_kpi_0&ref="+escape(s)),setTimeout(function(){o.pingback(u+"type=search_kpi_1&ref="+escape(s))},1e4),setTimeout(function(){o.pingback(u+"type=search_kpi_2&ref="+escape(s))},6e4)),a.run(),e.messagebus&&messagebus.subscribe("play.nextVideoPlayed",function(){a.lb=1,a.run()},null,null,{cache:!0}),o.pv=a,e.gotPlayerUID=c,e._hdpv=o}}(window,document),function(){var e={init:function(){var e=this.cookie("fusion"),t=this.cookie("freq");t&&""!=t||this.cookie("freq",(new Date).getTime(),{expires:2}),""==e&&(this.cookie("fusion",(new Date).getTime(),{expires:10}),e=this.cookie("fusion")),sohuHD.getJSONP("//hui.sohu.com/mum/ipqueryjp?callback=?&cookie="+e,function(e){e=e||{};for(var t=e.urls||[],i=0,n=t.length;n>i;i++)window._hdpv.pingback(t[i])})},cookie:function(e,t,i){if("undefined"==typeof t){var n=new RegExp("(?:^|; )"+e+"=([^;]*)").exec(document.cookie);return n?n[1]||"":""}i=i||{},null===t&&(t="",i.expires=-1);var r="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var o;"number"==typeof i.expires?(o=new Date,o.setTime(o.getTime()+3600*i.expires*1e3)):o=i.expires,r="; expires="+o.toUTCString()}var a=i.path?"; path="+i.path:"",c=i.domain?"; domain="+i.domain:"",s=i.secure?"; secure":"";document.cookie=[e,"=",t,r,a,c,s].join("")}};e.init()}(),function(e){e.sohuHD||(e.sohuHD={});var t=e.sohuHD;t.install||(t.install={safari:navigator.userAgent.toLowerCase().match(/version\/([\d.]+).*safari/),isIE:!!e.ActiveXObject,isIE6:!!e.ActiveXObject&&!e.XMLHttpRequest,isInstall:function(){function i(){var e=navigator.plugins;e.refresh(!1);for(var t,i=0;t=e[i];i++)if(/npifox/i.test(t.description))return!0;return!1}var n=/win/i.test(navigator.userAgent);if(!n)return!1;if(!t.install.isIE){if(i()){var r=null;document.getElementById("embed_ifox")||(r=document.createElement("embed"),r.id="embed_ifox",r.type="application/ifox-plugin",r.width="0",r.height="0",document.body.appendChild(r)),r=document.getElementById("embed_ifox");try{r.RunSohuVA()}catch(o){return!1}return!(!r.IsSupportShowDetailPage||!r.IsSupportShowDetailPage())}return!1}var a=null;if(e.ActiveXObject){try{a=new ActiveXObject("SoHuVA.SoHuDector")}catch(o){return!1}return!(null===a||!a.isSoHuVaReady())}}});var i=function(t,i){try{if(e.ActiveXObject){var n=null;return n=new ActiveXObject("SoHuVA.SoHuDector.1"),i?n[t](i):n[t]()}var r=document.getElementById("embed_ifox");return i?r[t](i):r[t]()}catch(o){return _e(o),!1}},n=function(e,t,i){if("undefined"==typeof t){var n=new RegExp("(?:^|; )"+e+"=([^;]*)").exec(document.cookie);return n?n[1]||"":""}i=i||{},null===t&&(t="",i.expires=-1);var r="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var o;"number"==typeof i.expires?(o=new Date,o.setTime(o.getTime()+24*i.expires*60*60*1e3)):o=i.expires,r="; expires="+o.toUTCString()}var a=i.path?"; path="+i.path:"",c=i.domain?"; domain="+i.domain:"",s=i.secure?"; secure":"";document.cookie=[e,"=",t,r,a,c,s].join("")},r="ifoxinstalled";t.install.isInstall()?n(r,i("GetSohuVAVersion"),{domain:"tv.sohu.com",path:"/"}):n(r,null,{domain:"tv.sohu.com",path:"/"})}(window),function(e){function t(t){function i(e,t){try{console[e](t)}catch(i){}}function n(e){return e&&e.length>10?e:c[e]||e}function r(e,i){return e&&t.isPlainObject(i)?e.replace(/\{(\w+)(?:-(\w+))?\}/g,function(e,n,r){var o=i[n];return t.isFunction(o)&&(o=o(r)),encodeURIComponent(o||"")}):""}function o(i,o){i=n(i),i=r(i,t.extend({},a,o)),i&&i.length>0&&e._hdpv.pingback(i)}var a={cookie:function(e){return sohuHD.cookie(e)},uuid:function(){return sohuHD.cookie("fuid")},fuid:function(){return sohuHD.cookie("fuid")},yyid:function(){return sohuHD.cookie("YYID")},sid:function(){return sohuHD.cookie("SUV")},url:function(){return location.href},refer:function(){return document.referrer},random:function(){return 1e13*Math.random()},vid:function(){return e.vid},cid:function(){return e.cid},playlistid:function(){return e.playlistId},catecode:function(){return e.cateCode}},c={mc:"//pv.hd.sohu.com/mc.gif?type={type}&txid={txid}&url={url}&refer={refer}&sid={sid}&fuid={fuid}&playlistid={playlistid}&vid={vid}&catecode={catecode}&cid={cid}&other={other}&ver=v20141016&_={random}",normal:"//pv.hd.sohu.com/mc.gif?type={type}&txid={txid}&url={url}&refer={refer}&sid={sid}&fuid={fuid}&ver=v20141016&_={random}"},s={$$:t,pinger:o,logger:i,ping:function(e){},watch:function(){},init:function(){var e=this;e.$$(function(){e.watch()}),e.init=function(){}}},u=0,h={};return{_ins:h,ping:o,createWatch:function(e){var i=t.extend({},s,e);return i.init(),i.name||(i.name="ins"+ ++u),h[i.name]=i,i}}}if(e.kao){var i={name:"impress",config:{flag:"pb-impress"},_watchs:[],addWatchElem:function(e){e.length>0&&(this._watchs=this._watchs.concat(e))},checkWatchElem:function(e,t){var i=e.getBoundingClientRect(),n={width:i.width||i.right-i.left,height:i.height||i.bottom-i.top,left:i.left,right:i.right,top:i.top,bottom:i.bottom},r=1/3,o={width:n.width*(1-r),height:n.height*(1-r)},a=n.left+o.width>0&&n.left-o.width<t.width-n.width,c=n.top+o.height>0&&n.top-o.height<t.height-n.height;return a&&c},detect:function(){var e=this.$$,t=e("["+this.config.flag+"]").not(function(){var t=e(this),i=t.data("pb-impress-count")||0;return i+=1,t.data("pb-impress-count",i),i>1}).toArray();return t},digest:function(e){var t=[],i=[];if(this._watchs.length<=0)return[];for(var n,r=0;n=this._watchs[r];r++)this.checkWatchElem(n,e)?t.push(n):i.push(n);return this._watchs=i,t},handler:function(e){var t=this,i=this.$$,n=this.digest(e);0!==n.length&&i.each(n,function(e,i){t.ping(i)})},ping:function(e){var t=this,i=$(e),n=i.attr("pb-impress")||"mc",r={type:"impress",txid:function(){return i.data("pb-txid")},other:function(){var e=i.data("pb-other");return"object"==typeof e?JSON.stringify(e):e}};t.pinger(n,r)},watch:function(){var t,i,n,r=this,o=this.$$;n=function(){var e=r.detect();e.length>0&&(r.addWatchElem(e),r.logger("info","watch:detect "+e.length+" element")),r.handler({scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.width(),height:i.height()})},i=o(e).bind("scroll resize",function(){t&&e.clearTimeout(t),t=e.setTimeout(n,1e3)}),r.logger("info","watch:impress"),n()}},n={name:"click",ping:function(e,t){var i=this,n=$(e),r=$(t),o=n.attr("pb-click")||n.attr("pb-click-a")||"mc",a={type:"click",txid:function(){return r.data("pb-txid")||n.data("pb-txid")},other:function(){var e=r.data("pb-other")||n.data("pb-other");return"object"==typeof e?JSON.stringify(e):e}};i.pinger(o,a)},watch:function(){var e=this,t=this.$$;t("body").delegate("[pb-click]","click",function(t){e.ping(this)}).delegate("[pb-click-a]","click",function(i){var n=t(i.target);if(n.is("a"))e.ping(this,n);else{var r=n.closest("a");r.length&&e.ping(this,r)}}),this.logger("info","watch:click")}},r={name:"pv",ping:function(e){var t="normal",i={type:"pv",txid:e[1]};this.pinger(t,i)},hasPvtxid:function(){var e=(document.location.href||"").match(/pvtxid=([^&]+)/i);return e&&e[1]?e:!1},watch:function(){var e=this.hasPvtxid();e&&this.ping(e)}},o={name:"mbus",ping:function(e){var t=e.url||"mc",i={type:e.type||"impress",txid:e.txid,other:e.other||""};this.pinger(t,i)},watch:function(){var e=this;messagebus.subscribe("statV2.ping",function(t,i){e.ping(i)},null,null,{cache:!0})}};kao("jquery",function(){var a=sohuHD.statV2=t(e.jQuery);a.createWatch(i),a.createWatch(n),a.createWatch(r),a.createWatch(o)})}}(window);